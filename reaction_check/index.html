<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>反応速度チェックツール</title>
  <style>
    #target {
      width: 200px;
      height: 200px;
      background-color: #ccc;
      margin: 20px auto;
      display: none;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>反応速度チェックツール</h1>
  <p>指定された色が表示されたら、すぐにクリックしてください。</p>

  <button id="startBtn">スタート</button>
  <div id="info"></div>

  <div id="target"></div>

  <script>
    const startBtn = document.getElementById('startBtn');
    const infoDiv   = document.getElementById('info');
    const targetDiv = document.getElementById('target');

    let clickAllowed = false;
    let startTime = 0; // 色が表示された時刻

    startBtn.addEventListener('click', function() {
      infoDiv.textContent = "ランダムなタイミングで色が表示されます。待機してください...";
      targetDiv.style.display = "none";
      clickAllowed = false;

      const waitTime = Math.random() * 3000 + 2000; // 2～5秒
      setTimeout(function(){
        targetDiv.style.backgroundColor = "red";
        targetDiv.style.display = "block";
        startTime = Date.now(); // 今の時刻を記録
        clickAllowed = true;
      }, waitTime);
    });

    targetDiv.addEventListener('click', function() {
      if(!clickAllowed) return;
      const endTime = Date.now();
      const reactionTime = endTime - startTime; // ミリ秒
      infoDiv.textContent = "反応時間: " + reactionTime + " ms";
      // クリック後はすぐに消す
      targetDiv.style.display = "none";
      clickAllowed = false;
    });
  </script>
</body>
</html>